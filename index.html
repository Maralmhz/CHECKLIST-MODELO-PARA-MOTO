<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#e41616">
    <title>Checklist Motos - Oficina</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="wizard.css">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        /* Logo Grande Quadrada */
        .logo-container img {
            width: 100px !important;
            height: 100px !important;
            border-radius: 8px !important;
            border: 3px solid white;
            object-fit: contain !important;
            background: white;
            padding: 5px;
        }
        
        /* Bot√µes de Inspe√ß√£o de 3 Estados */
        .inspecao-item {
            margin-bottom: 15px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #ddd;
        }
        
        .inspecao-item-label {
            font-weight: 700;
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            display: block;
        }
        
        .estado-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
        }
        
        .estado-btn {
            padding: 12px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 12px;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            min-height: 44px;
        }
        
        .estado-btn:hover, .estado-btn:active {
            transform: scale(0.98);
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }
        
        .estado-btn.bom {
            border-color: #27ae60;
            color: #27ae60;
        }
        
        .estado-btn.bom.ativo {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        
        .estado-btn.ruim {
            border-color: #f39c12;
            color: #f39c12;
        }
        
        .estado-btn.ruim.ativo {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }
        
        .estado-btn.danificado {
            border-color: #e74c3c;
            color: #e74c3c;
        }
        
        .estado-btn.danificado.ativo {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        .inspecao-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        
        /* Bot√µes de Pe√ßas Pr√©-definidas */
        .pecas-rapidas {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 8px;
            margin: 15px 0;
        }
        
        .peca-btn, .servico-btn {
            padding: 12px 10px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .peca-btn:active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
            transform: scale(0.95);
        }
        
        .servico-btn:active {
            background: #0056b3;
            color: white;
            border-color: #0056b3;
            transform: scale(0.95);
        }
        
        /* Status de Salvamento */
        .save-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .save-status.salvando {
            background: #fff3cd;
            color: #856404;
        }
        
        .save-status.salvo {
            background: #d4edda;
            color: #155724;
        }
        
        .save-status.erro {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* Otimiza√ß√µes Mobile */
        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }
            
            .container {
                padding: 10px;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
                padding: 15px;
            }
            
            .header-content {
                margin-left: 0 !important;
                margin-top: 10px;
            }
            
            .header-content h1 {
                font-size: 18px;
            }
            
            .logo-container img {
                width: 70px !important;
                height: 70px !important;
            }
            
            .tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
                -webkit-overflow-scrolling: touch;
            }
            
            .tab-button {
                padding: 10px 15px;
                font-size: 12px;
                white-space: nowrap;
                flex-shrink: 0;
            }
            
            .os-info-bar {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
                text-align: center;
            }
            
            .section-title {
                font-size: 16px;
            }
            
            .form-row {
                grid-template-columns: 1fr !important;
                gap: 10px;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 16px;
                padding: 12px;
            }
            
            .estado-buttons {
                gap: 5px;
            }
            
            .estado-btn {
                padding: 10px 6px;
                font-size: 10px;
                min-height: 44px;
            }
            
            .pecas-rapidas {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 6px;
            }
            
            .peca-btn, .servico-btn {
                padding: 10px 8px;
                font-size: 11px;
            }
            
            .btn-primary,
            .btn-secondary,
            .btn-success,
            .btn-danger {
                width: 100%;
                margin: 5px 0;
            }
            
            table {
                font-size: 11px;
            }
            
            table th,
            table td {
                padding: 6px 4px;
            }
        }
        
        /* Touch targets m√≠nimos de 44px */
        button, input, select, textarea {
            min-height: 44px;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <img id="logo-oficina" src="logo.png" alt="Logo">
            </div>
            <div class="header-content">
                <h1 id="nome-oficina">OFICINA DE MOTOS</h1>
                <p id="subtitulo-oficina">Checklist de Motocicletas</p>
                <div class="contato-info">
                    <span id="telefone-oficina">(00) 00000-0000</span>
                </div>
                <div id="endereco-oficina">Endere√ßo da Oficina</div>
                <div id="cnpj-oficina">CNPJ: 00.000.000/0000-00</div>
                <div class="status-sync">
                    <div class="sync-dot" id="syncStatus"></div>
                    <span id="syncText">Online</span>
                </div>
            </div>
            <div class="header-badge">v3.0 MOTOS</div>
        </div>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('novo-checklist')">‚ûï Novo</button>
            <button class="tab-button" onclick="switchTab('orcamento')">üí∞ Or√ßamento</button>
            <button class="tab-button" onclick="switchTab('fotos')">üì∏ Fotos</button>
            <button class="tab-button" onclick="switchTab('resumo'); atualizarResumoOS()">üìÑ Resumo</button>
            <button class="tab-button" onclick="switchTab('historico')">üìã Hist√≥rico</button>
        </div>

        <div class="os-info-bar">
            <div>
                üèçÔ∏è ORDEM DE SERVI√áO
                <span id="saveStatus" class="save-status" style="display:none;"></span>
            </div>
            <div>
                <span id="barraFixaOS">-</span>
                <button class="btn-small btn-secondary" onclick="sincronizarDados()" style="margin-left:10px;">üîÑ Sincronizar</button>
            </div>
        </div>

        <!-- ABA NOVO CHECKLIST -->
        <div id="novo-checklist" class="tab-content active">
            <div class="content">
                <div id="successMessage" class="alert alert-success"></div>
                <div id="errorMessage" class="alert alert-error"></div>
                <div id="infoMessage" class="alert alert-info"></div>

                <form id="checklistForm" class="wizard-form">
                    <div class="section-title">üèçÔ∏è INFORMA√á√ïES DA MOTO</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="placa">Placa *</label>
                            <input type="text" id="placa" name="placa" placeholder="ABC-1234" required>
                        </div>
                        <div class="form-group">
                            <label for="chassi">Chassi</label>
                            <input type="text" id="chassi" name="chassi">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="modelo">Modelo</label>
                            <input type="text" id="modelo" name="modelo" placeholder="Ex: Honda CG 160">
                        </div>
                        <div class="form-group">
                            <label for="kmentrada">KM Entrada</label>
                            <input type="text" id="kmentrada" name="kmentrada">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="data">Data</label>
                            <input type="date" id="data" name="data">
                        </div>
                        <div class="form-group">
                            <label for="hora">Hora</label>
                            <input type="time" id="hora" name="hora">
                        </div>
                    </div>

                    <div class="section-title">üîç INSPE√á√ÉO VISUAL DA MOTO</div>

                    <div class="equip-section">
                        <div class="equip-section-title">üî¶ ILUMINA√á√ÉO E SINALIZA√á√ÉO</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Farol Dianteiro</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'farol_dianteiro', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'farol_dianteiro', 'RUIM')">‚ö†Ô∏è RUIM</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'farol_dianteiro', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Lanterna Traseira</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'lanterna_tras', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'lanterna_tras', 'RUIM')">‚ö†Ô∏è RUIM</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'lanterna_tras', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Setas/Piscas</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'setas', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'setas', 'RUIM')">‚ö†Ô∏è RUIM</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'setas', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Luz de Freio</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'luz_freio', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'luz_freio', 'RUIM')">‚ö†Ô∏è RUIM</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'luz_freio', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">üõû PNEUS E RODAS</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Pneu Dianteiro</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'pneu_dianteiro', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'pneu_dianteiro', 'DESGASTADO')">‚ö†Ô∏è DESGASTADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'pneu_dianteiro', 'CARECA')">‚ùå CARECA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Pneu Traseiro</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'pneu_traseiro', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'pneu_traseiro', 'DESGASTADO')">‚ö†Ô∏è DESGASTADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'pneu_traseiro', 'CARECA')">‚ùå CARECA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Roda Dianteira</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'roda_dianteira', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'roda_dianteira', 'EMPENADA')">‚ö†Ô∏è EMPENADA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'roda_dianteira', 'TRINCADA')">‚ùå TRINCADA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Roda Traseira</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'roda_traseira', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'roda_traseira', 'EMPENADA')">‚ö†Ô∏è EMPENADA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'roda_traseira', 'TRINCADA')">‚ùå TRINCADA</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">üõë SISTEMA DE FREIOS</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Freio Dianteiro</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'freio_dianteiro', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'freio_dianteiro', 'COM FOLGA')">‚ö†Ô∏è COM FOLGA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'freio_dianteiro', 'TRAVANDO')">‚ùå TRAVANDO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Freio Traseiro</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'freio_traseiro', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'freio_traseiro', 'COM FOLGA')">‚ö†Ô∏è COM FOLGA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'freio_traseiro', 'TRAVANDO')">‚ùå TRAVANDO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Pastilhas de Freio</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'pastilhas', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'pastilhas', 'DESGASTADAS')">‚ö†Ô∏è DESGASTADAS</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'pastilhas', 'ACABADAS')">‚ùå ACABADAS</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Disco de Freio</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'disco_freio', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'disco_freio', 'RISCADO')">‚ö†Ô∏è RISCADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'disco_freio', 'EMPENADO')">‚ùå EMPENADO</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">‚öôÔ∏è TRANSMISS√ÉO</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Corrente</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'corrente', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'corrente', 'FROUXA')">‚ö†Ô∏è FROUXA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'corrente', 'RESSECADA')">‚ùå RESSECADA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Coroa/Pinh√£o</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'coroa_pinhao', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'coroa_pinhao', 'DESGASTADO')">‚ö†Ô∏è DESGASTADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'coroa_pinhao', 'DENTES QUEBRADOS')">‚ùå DENTES QUEBRADOS</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Pedal de C√¢mbio</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'pedal_cambio', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'pedal_cambio', 'FROUXO')">‚ö†Ô∏è FROUXO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'pedal_cambio', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Embreagem</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'embreagem', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'embreagem', 'PATINANDO')">‚ö†Ô∏è PATINANDO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'embreagem', 'SEM FUNCIONAR')">‚ùå SEM FUNCIONAR</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">‚ö° SISTEMA EL√âTRICO</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Bateria</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'bateria', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'bateria', 'FRACA')">‚ö†Ô∏è FRACA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'bateria', 'DESCARREGADA')">‚ùå DESCARREGADA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Buzina</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'buzina', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'buzina', 'FRACA')">‚ö†Ô∏è FRACA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'buzina', 'N√ÉO FUNCIONA')">‚ùå N√ÉO FUNCIONA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Painel/Indicadores</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'painel', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'painel', 'COM DEFEITO')">‚ö†Ô∏è COM DEFEITO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'painel', 'APAGADO')">‚ùå APAGADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Fia√ß√£o</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'fiacao', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'fiacao', 'EMENDAS')">‚ö†Ô∏è EMENDAS</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'fiacao', 'EXPOSTA')">‚ùå EXPOSTA</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">üîß SUSPENS√ÉO E DIRE√á√ÉO</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Suspens√£o Dianteira</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'suspensao_diant', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'suspensao_diant', 'VAZANDO')">‚ö†Ô∏è VAZANDO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'suspensao_diant', 'TRAVADA')">‚ùå TRAVADA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Suspens√£o Traseira</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'suspensao_tras', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'suspensao_tras', 'VAZANDO')">‚ö†Ô∏è VAZANDO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'suspensao_tras', 'TRAVADA')">‚ùå TRAVADA</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Guid√£o/Dire√ß√£o</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'guidao', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'guidao', 'COM FOLGA')">‚ö†Ô∏è COM FOLGA</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'guidao', 'TRAVADO')">‚ùå TRAVADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Manoplas/Punhos</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'manoplas', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'manoplas', 'DESGASTADAS')">‚ö†Ô∏è DESGASTADAS</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'manoplas', 'RASGADAS')">‚ùå RASGADAS</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">ü™û ESPELHOS E VISUAL</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Retrovisor Esquerdo</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'retrovisor_esq', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'retrovisor_esq', 'FROUXO')">‚ö†Ô∏è FROUXO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'retrovisor_esq', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Retrovisor Direito</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'retrovisor_dir', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'retrovisor_dir', 'FROUXO')">‚ö†Ô∏è FROUXO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'retrovisor_dir', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Carenagem/Pl√°sticos</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'carenagem', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'carenagem', 'RISCADO')">‚ö†Ô∏è RISCADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'carenagem', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Banco</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'banco', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'banco', 'DESGASTADO')">‚ö†Ô∏è DESGASTADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'banco', 'RASGADO')">‚ùå RASGADO</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">üõ†Ô∏è MOTOR E FLUIDOS</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">N√≠vel de √ìleo</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'nivel_oleo', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'nivel_oleo', 'BAIXO')">‚ö†Ô∏è BAIXO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'nivel_oleo', 'VAZIO')">‚ùå VAZIO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Vazamentos</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'vazamentos', 'SEM VAZAMENTOS')">‚úÖ SEM VAZAMENTOS</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'vazamentos', 'LEVE')">‚ö†Ô∏è LEVE</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'vazamentos', 'SEVERO')">‚ùå SEVERO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Escape/Ronco Motor</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'escape', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'escape', 'BARULHENTO')">‚ö†Ô∏è BARULHENTO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'escape', 'FURADO')">‚ùå FURADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Partida/Funcionamento</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'partida', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'partida', 'DIFICULDADE')">‚ö†Ô∏è DIFICULDADE</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'partida', 'N√ÉO LIGA')">‚ùå N√ÉO LIGA</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="equip-section">
                        <div class="equip-section-title">üì¶ ACESS√ìRIOS</div>
                        <div class="inspecao-grid">
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Ba√∫</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'bau', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'bau', 'AMASSADO')">‚ö†Ô∏è AMASSADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'bau', 'N√ÉO TEM')">‚ùå N√ÉO TEM</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Protetor de Motor</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'protetor_motor', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'protetor_motor', 'RISCADO')">‚ö†Ô∏è RISCADO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'protetor_motor', 'N√ÉO TEM')">‚ùå N√ÉO TEM</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Suporte Lateral</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'suporte_lateral', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'suporte_lateral', 'FROUXO')">‚ö†Ô∏è FROUXO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'suporte_lateral', 'QUEBRADO')">‚ùå QUEBRADO</button>
                                </div>
                            </div>
                            <div class="inspecao-item">
                                <span class="inspecao-item-label">Suporte Central</span>
                                <div class="estado-buttons">
                                    <button type="button" class="estado-btn bom" onclick="marcarEstado(this, 'suporte_central', 'BOM')">‚úÖ BOM</button>
                                    <button type="button" class="estado-btn ruim" onclick="marcarEstado(this, 'suporte_central', 'FROUXO')">‚ö†Ô∏è FROUXO</button>
                                    <button type="button" class="estado-btn danificado" onclick="marcarEstado(this, 'suporte_central', 'N√ÉO TEM')">‚ùå N√ÉO TEM</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="obsInspecao">Observa√ß√µes Gerais da Inspe√ß√£o</label>
                        <textarea id="obsInspecao" name="obsInspecao" rows="4" placeholder="Descreva outros detalhes importantes encontrados durante a inspe√ß√£o..."></textarea>
                    </div>

                    <div class="section-title">üë§ DADOS DO CLIENTE</div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="nomecliente">Nome do Cliente</label>
                            <input type="text" id="nomecliente" name="nomecliente">
                        </div>
                        <div class="form-group">
                            <label for="celular">Celular/WhatsApp</label>
                            <input type="tel" id="celular" name="celular">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="servicos">Servi√ßos Solicitados</label>
                        <textarea id="servicos" name="servicos" rows="3" placeholder="Ex: Troca de √≥leo, regulagem de corrente, revis√£o geral..."></textarea>
                    </div>
                </form>
            </div>
        </div>

        <!-- ABA OR√áAMENTO -->
        <div id="orcamento" class="tab-content">
            <div class="content">
                <div class="section-title">üí∞ PE√áAS & SERVI√áOS</div>

                <!-- Pe√ßas R√°pidas -->
                <h4>üî© Pe√ßas Comuns</h4>
                <div class="pecas-rapidas">
                    <button class="peca-btn" onclick="adicionarPecaRapida('√ìleo Motor 20W50')">√ìleo 20W50</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('√ìleo Motor 10W40')">√ìleo 10W40</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Filtro de √ìleo')">Filtro √ìleo</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Vela de Igni√ß√£o')">Vela</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Pastilha de Freio')">Pastilha Freio</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Corrente')">Corrente</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Coroa')">Coroa</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Pinh√£o')">Pinh√£o</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Bateria')">Bateria</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Pneu Dianteiro')">Pneu Diant.</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('Pneu Traseiro')">Pneu Tras.</button>
                    <button class="peca-btn" onclick="adicionarPecaRapida('C√¢mara de Ar')">C√¢mara Ar</button>
                </div>

                <!-- Servi√ßos R√°pidos -->
                <h4>üîß Servi√ßos Comuns</h4>
                <div class="pecas-rapidas">
                    <button class="servico-btn" onclick="adicionarServicoRapido('Troca de √ìleo')">Troca √ìleo</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Regulagem de Corrente')">Regulagem Corrente</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Troca de Pastilhas')">Troca Pastilhas</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Revis√£o Geral')">Revis√£o Geral</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Limpeza Carburador')">Limpeza Carb.</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Troca de Pneu')">Troca Pneu</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Balanceamento')">Balanceamento</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Sangria de Freio')">Sangria Freio</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Diagn√≥stico El√©trico')">Diag. El√©trico</button>
                    <button class="servico-btn" onclick="adicionarServicoRapido('Reparo Motor')">Reparo Motor</button>
                </div>

                <h4 style="margin-top:30px;">‚ûï Adicionar Manualmente</h4>
                <div class="form-row">
                    <div class="form-group">
                        <label for="descricaoItem">Descri√ß√£o</label>
                        <input type="text" id="descricaoItem" placeholder="Digite a descri√ß√£o" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="valorItem">Valor (R$) - Enter para adicionar</label>
                        <input type="number" id="valorItem" step="0.01" min="0" placeholder="0.00" autocomplete="off">
                    </div>
                </div>
                
                <div style="display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap;">
                    <button type="button" class="btn-primary" onclick="adicionarItemTipo('peca')">üî© Adicionar Pe√ßa</button>
                    <button type="button" class="btn-secondary" onclick="adicionarItemTipo('servico')">üîß Adicionar Servi√ßo</button>
                </div>

                <h4>üî© Pe√ßas</h4>
                <table style="width:100%; border-collapse:collapse;">
                    <thead>
                        <tr><th>Descri√ß√£o</th><th>Valor</th><th>A√ß√µes</th></tr>
                    </thead>
                    <tbody id="tabelaPecas"></tbody>
                    <tfoot>
                        <tr>
                            <td><strong>Total Pe√ßas:</strong></td>
                            <td id="totalPecas"><strong>R$ 0,00</strong></td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>

                <h4>üîß Servi√ßos</h4>
                <table style="width:100%; border-collapse:collapse;">
                    <thead>
                        <tr><th>Descri√ß√£o</th><th>Valor</th><th>A√ß√µes</th></tr>
                    </thead>
                    <tbody id="tabelaServicos"></tbody>
                    <tfoot>
                        <tr>
                            <td><strong>Total Servi√ßos:</strong></td>
                            <td id="totalServicos"><strong>R$ 0,00</strong></td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>

                <div style="text-align:right; margin-top:20px;">
                    <h3>TOTAL GERAL: <span id="totalGeralFinal">R$ 0,00</span></h3>
                </div>

                <button class="btn-success" onclick="switchTab('resumo'); atualizarResumoOS()">üìÑ Ver Resumo</button>
            </div>
        </div>

        <div id="fotos" class="tab-content">
            <div class="content">
                <div class="section-title">üì∏ FOTOS DA MOTO</div>
                <button class="btn-primary" onclick="iniciarCamera()">üì∑ Tirar Foto</button>
                <input type="file" id="uploadFotos" multiple accept="image/*" onchange="adicionarFotos(event)" style="display:none;">
                <button class="btn-secondary" onclick="document.getElementById('uploadFotos').click()">üìÅ Galeria</button>
                <div class="camera-container" style="display:none;">
                    <video id="cameraPreview" autoplay playsinline style="width:100%; max-width:400px;"></video>
                    <button class="btn-success" onclick="tirarFoto()" id="btnTirarFoto">üì∏ Capturar</button>
                    <button class="btn-secondary" onclick="pararCamera()">‚ùå Cancelar</button>
                </div>
                <div id="galeriaFotos" class="fotos-grid"></div>
                <button class="btn-danger" onclick="limparFotos()">üóëÔ∏è Limpar Fotos</button>
            </div>
        </div>

        <div id="resumo" class="tab-content">
            <div class="content">
                <div id="resumoContainer" class="os-paper">
                    <div class="os-header">
                        <img id="logoResumo" src="logo.png" alt="Logo" style="width:100px; height:100px; object-fit:contain; background:white; padding:5px; border-radius:8px;">
                        <div>
                            <h2 id="nomeOficinaResumo">OFICINA DE MOTOS</h2>
                            <p id="enderecoOficinaResumo"></p>
                            <p id="telefoneOficinaResumo"></p>
                            <p id="cnpjOficinaResumo"></p>
                        </div>
                        <div>
                            <h3>OS N¬∫ <span id="osNumero"></span></h3>
                        </div>
                    </div>
                    <h3>CLIENTE</h3>
                    <p><strong>Nome:</strong> <span id="rNomeCliente"></span></p>
                    <p><strong>Celular:</strong> <span id="rCelular"></span></p>
                    <h3>MOTOCICLETA</h3>
                    <p><strong>Modelo:</strong> <span id="rModelo"></span></p>
                    <p><strong>Placa:</strong> <span id="rPlaca"></span></p>
                    <p><strong>KM:</strong> <span id="rKmEntrada"></span></p>
                    <h3>SERVI√áOS SOLICITADOS</h3>
                    <p id="rServicos"></p>
                    <h3>INSPE√á√ÉO</h3>
                    <div id="rChecklistBadges"></div>
                    <h3>OBSERVA√á√ïES</h3>
                    <p id="rObsInspecao"></p>
                    <div style="page-break-before:always;"></div>
                    <h3>PE√áAS</h3>
                    <table id="rTabelaPecas" style="width:100%;"></table>
                    <p><strong>Total Pe√ßas:</strong> <span id="rTotalPecas"></span></p>
                    <h3>SERVI√áOS</h3>
                    <table id="rTabelaServicos" style="width:100%;"></table>
                    <p><strong>Total Servi√ßos:</strong> <span id="rTotalServicos"></span></p>
                    <h2>TOTAL GERAL: <span id="rTotalGeral"></span></h2>
                    <div style="margin-top:50px;">
                        <div style="display:inline-block; width:45%; text-align:center; border-top:1px solid #000;">Assinatura Cliente</div>
                        <div style="display:inline-block; width:45%; text-align:center; border-top:1px solid #000; margin-left:5%;">Assinatura T√©cnico</div>
                    </div>
                </div>

                <div style="display:flex; gap:10px; margin-top:20px; flex-wrap:wrap;">
                    <button class="btn-success" onclick="gerarPDFResumo()">üì• Gerar PDF</button>
                    <button class="btn-primary" onclick="salvarNaNuvem()">‚òÅÔ∏è Salvar na Nuvem</button>
                </div>
            </div>
        </div>

        <div id="historico" class="tab-content">
            <div class="content">
                <input type="text" id="searchInput" placeholder="üîç Buscar..." style="width:100%; padding:12px; margin-bottom:20px;">
                <div id="checklistsList"></div>
                <div id="emptyMessage" style="text-align:center; padding:40px; display:none;">
                    <p>üìã Nenhum checklist ainda</p>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
    <script src="firebase.js"></script>
    <script src="main.js"></script>
    <script src="orcamento.js"></script>
    <script src="resumo-veiculo.js"></script>
    <script src="fotos.js"></script>
    <script src="resumo.js"></script>
    <script src="form-nav.js"></script>
    <script src="wizard.js"></script>
    
    <script>
        // Marca√ß√µes de inspe√ß√£o
        window.marcacoes = {};
        
        function marcarEstado(btn, item, estado) {
            const grupo = btn.parentElement;
            Array.from(grupo.children).forEach(b => b.classList.remove('ativo'));
            btn.classList.add('ativo');
            window.marcacoes[item] = estado;
            let input = document.getElementById('insp_' + item);
            if (!input) {
                input = document.createElement('input');
                input.type = 'hidden';
                input.id = 'insp_' + item;
                input.name = 'inspecao_' + item;
                document.getElementById('checklistForm').appendChild(input);
            }
            input.value = item + ': ' + estado;
        }
        
        // Armazenar tipo de item (pe√ßa ou servi√ßo)
        let tipoItemAtual = 'peca';
        
        // Fun√ß√£o para adicionar pe√ßa r√°pida
        function adicionarPecaRapida(descricao) {
            tipoItemAtual = 'peca';
            document.getElementById('descricaoItem').value = descricao;
            document.getElementById('valorItem').value = '';
            document.getElementById('valorItem').focus();
        }
        
        // Fun√ß√£o para adicionar servi√ßo r√°pido
        function adicionarServicoRapido(descricao) {
            tipoItemAtual = 'servico';
            document.getElementById('descricaoItem').value = descricao;
            document.getElementById('valorItem').value = '';
            document.getElementById('valorItem').focus();
        }
        
        // Fun√ß√£o para adicionar item com tipo espec√≠fico
        function adicionarItemTipo(tipo) {
            tipoItemAtual = tipo;
            processarAdicaoItem();
        }
        
        // Processar adi√ß√£o de item
        function processarAdicaoItem() {
            const desc = document.getElementById('descricaoItem').value.trim();
            const valorInput = document.getElementById('valorItem').value;
            const valor = valorInput === '' ? 0 : parseFloat(valorInput);
            
            if (!desc) {
                alert('‚úèÔ∏è Digite a descri√ß√£o!');
                document.getElementById('descricaoItem').focus();
                return;
            }
            
            // Adicionar √† tabela correspondente
            adicionarNaTabela(desc, valor, tipoItemAtual);
            
            // Limpar campos e focar no primeiro
            document.getElementById('descricaoItem').value = '';
            document.getElementById('valorItem').value = '';
            document.getElementById('descricaoItem').focus();
        }
        
        // Arrays para armazenar pe√ßas e servi√ßos
        window.pecas = [];
        window.servicos = [];
        
        // Fun√ß√£o para adicionar na tabela
        function adicionarNaTabela(descricao, valor, tipo) {
            const item = { descricao, valor };
            
            if (tipo === 'peca') {
                window.pecas.push(item);
                atualizarTabelaPecas();
            } else {
                window.servicos.push(item);
                atualizarTabelaServicos();
            }
            
            atualizarTotais();
        }
        
        // Atualizar tabela de pe√ßas
        function atualizarTabelaPecas() {
            const tbody = document.getElementById('tabelaPecas');
            tbody.innerHTML = '';
            
            window.pecas.forEach((peca, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${peca.descricao}</td>
                    <td>R$ ${peca.valor.toFixed(2)}</td>
                    <td><button class="btn-small btn-danger" onclick="removerPeca(${index})">‚ùå</button></td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // Atualizar tabela de servi√ßos
        function atualizarTabelaServicos() {
            const tbody = document.getElementById('tabelaServicos');
            tbody.innerHTML = '';
            
            window.servicos.forEach((servico, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${servico.descricao}</td>
                    <td>R$ ${servico.valor.toFixed(2)}</td>
                    <td><button class="btn-small btn-danger" onclick="removerServico(${index})">‚ùå</button></td>
                `;
                tbody.appendChild(tr);
            });
        }
        
        // Remover pe√ßa
        function removerPeca(index) {
            window.pecas.splice(index, 1);
            atualizarTabelaPecas();
            atualizarTotais();
        }
        
        // Remover servi√ßo
        function removerServico(index) {
            window.servicos.splice(index, 1);
            atualizarTabelaServicos();
            atualizarTotais();
        }
        
        // Atualizar totais
        function atualizarTotais() {
            const totalPecas = window.pecas.reduce((sum, p) => sum + p.valor, 0);
            const totalServicos = window.servicos.reduce((sum, s) => sum + s.valor, 0);
            const totalGeral = totalPecas + totalServicos;
            
            document.getElementById('totalPecas').textContent = 'R$ ' + totalPecas.toFixed(2);
            document.getElementById('totalServicos').textContent = 'R$ ' + totalServicos.toFixed(2);
            document.getElementById('totalGeralFinal').textContent = 'R$ ' + totalGeral.toFixed(2);
        }
        
        // Event listeners para Enter
        document.addEventListener('DOMContentLoaded', function() {
            const descInput = document.getElementById('descricaoItem');
            const valorInput = document.getElementById('valorItem');
            
            // Enter na descri√ß√£o -> foca no valor
            descInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    valorInput.focus();
                }
            });
            
            // Enter no valor -> adiciona item
            valorInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    processarAdicaoItem();
                }
            });
        });
        
        // Fun√ß√£o de salvar na nuvem
        function salvarNaNuvem() {
            const status = document.getElementById('saveStatus');
            status.style.display = 'inline-flex';
            status.className = 'save-status salvando';
            status.textContent = '‚åõ Salvando...';
            
            setTimeout(() => {
                status.className = 'save-status salvo';
                status.textContent = '‚úÖ Salvo na nuvem!';
                
                setTimeout(() => {
                    status.style.display = 'none';
                }, 3000);
            }, 1500);
            
            if (typeof salvarChecklist === 'function') {
                salvarChecklist();
            }
        }
        
        // Fun√ß√£o de sincronizar
        function sincronizarDados() {
            const status = document.getElementById('saveStatus');
            status.style.display = 'inline-flex';
            status.className = 'save-status salvando';
            status.textContent = 'üîÑ Sincronizando...';
            
            setTimeout(() => {
                status.className = 'save-status salvo';
                status.textContent = '‚úÖ Sincronizado!';
                
                setTimeout(() => {
                    status.style.display = 'none';
                }, 3000);
            }, 2000);
        }
    </script>
</body>
</html>